<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Building Scala Libraries</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
<link rel="stylesheet" href="https://guides.gradle.org/asciidoctor.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700|Source+Code+Pro:500">
<link rel="apple-touch-icon" sizes="180x180" href="https://guides.gradle.org/icon/apple-touch-icon.png">
<link rel="icon" type="image/png" href="https://guides.gradle.org/icon/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://guides.gradle.org/icon/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="https://guides.gradle.org/icon/manifest.json">
<link rel="mask-icon" href="https://guides.gradle.org/icon/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="https://guides.gradle.org/icon/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Building Scala Libraries">
<meta name="application-name" content="Building Scala Libraries">
<meta name="msapplication-config" content="https://guides.gradle.org/icon/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<script defer src="https://guides.gradle.org/js/set-time-to-complete-text.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,"script","https://www.google-analytics.com/analytics.js","ga");
  ga("create", "UA-4207603-1", "auto");
  ga("send", "pageview");
</script>
</head>
<body class="article toc2 toc-right">
<div id="header"><div style="padding-top: 10px;"><a href="https://guides.gradle.org"><img src="http://guides.gradle.org/gradle-guides.svg" alt=""></a></div><h1>Building Scala Libraries</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#what_you_ll_build">What you&#8217;ll build</a></li>
<li><a href="#what_you_ll_need">What you&#8217;ll need</a></li>
<li><a href="#check_the_user_manual">Check the user manual</a></li>
<li><a href="#run_the_init_task">Run the init task</a></li>
<li><a href="#review_the_generated_project_files">Review the generated project files</a></li>
<li><a href="#execute_the_build">Execute the build</a></li>
<li><a href="#adding_api_documentation">Adding API documentation</a></li>
<li><a href="#summary">Summary</a></li>
<li><a href="#next_steps">Next Steps</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide demonstrates how to create a Scala library in the standard form using Gradle&#8217;s Build Init plugin.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_you_ll_build"><a class="anchor" href="#what_you_ll_build"></a>What you&#8217;ll build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ll generate a Scala library with the standard layout.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_you_ll_need"><a class="anchor" href="#what_you_ll_need"></a>What you&#8217;ll need</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>About <span class="time-to-complete-text"></span></p>
</li>
<li>
<p>A text editor</p>
</li>
<li>
<p>A command prompt</p>
</li>
<li>
<p>The Java Development Kit (JDK), version 1.7 or higher</p>
</li>
<li>
<p>A <a href="https://gradle.org/install">Gradle distribution</a>, version 3.5 or better</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="check_the_user_manual"><a class="anchor" href="#check_the_user_manual"></a>Check the user manual</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Gradle comes with a built-in plugin called the Build Init plugin. It is documented in the <a href="https://docs.gradle.org/current/userguide/build_init_plugin.html">Gradle User Manual</a>. The plugin has one task, called <code>init</code>, that generates the project. The <code>init</code> task calls the (also built-in) <code>wrapper</code> task to create a Gradle wrapper script, <code>gradlew</code>.</p>
</div>
<div class="paragraph">
<p>The first step is to create a folder for the new project and change directory into it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mkdir building-scala-libraries
$ cd building-scala-libraries</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run_the_init_task"><a class="anchor" href="#run_the_init_task"></a>Run the init task</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From inside the new project directory, run the <code>init</code> task with the <code>groovy-library</code> argument.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ gradle init --type scala-library
:wrapper
:init

BUILD SUCCESSFUL</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>init</code> task runs the <code>wrapper</code> task first, which generates the <code>gradlew</code> and <code>gradlew.bat</code> wrapper scripts. Then it creates the new project with the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>├── build.gradle
├── gradle
│   └── wrapper  <i class="conum" data-value="1"></i><b>(1)</b>
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew
├── gradlew.bat
├── settings.gradle
└── src
    ├── main
    │   └── scala  <i class="conum" data-value="2"></i><b>(2)</b>
    │       └── Library.scala
    └── test
        └── scala <i class="conum" data-value="3"></i><b>(3)</b>
            └── LibrarySuite.scala</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Generated folder for wrapper files</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Default Scala source folder</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Default Scala test folder</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="review_the_generated_project_files"><a class="anchor" href="#review_the_generated_project_files"></a>Review the generated project files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>settings.gradle</code> file is heavily commented, but has only one active line:</p>
</div>
<div class="listingblock">
<div class="title">Generated settings.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">rootProject.name = <span class="string"><span class="delimiter">'</span><span class="content">building-scala-libraries</span><span class="delimiter">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This assigns the name of the root project.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The generated <code>build.gradle</code> file also has many comments. The active portion is reproduced here (note version numbers for the dependencies may be updated in later versions of Gradle):</p>
</div>
<div class="listingblock">
<div class="title">Generated build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">scala</span><span class="delimiter">'</span></span>

repositories {
    jcenter() <i class="conum" data-value="1"></i><b>(1)</b>
}

dependencies {
    compile <span class="string"><span class="delimiter">'</span><span class="content">org.scala-lang:scala-library:2.11.8</span><span class="delimiter">'</span></span> <i class="conum" data-value="2"></i><b>(2)</b>

    testCompile <span class="string"><span class="delimiter">'</span><span class="content">junit:junit:4.12</span><span class="delimiter">'</span></span> <i class="conum" data-value="3"></i><b>(3)</b>
    testCompile <span class="string"><span class="delimiter">'</span><span class="content">org.scalatest:scalatest_2.11:3.0.1</span><span class="delimiter">'</span></span> <i class="conum" data-value="4"></i><b>(4)</b>

    testRuntime <span class="string"><span class="delimiter">'</span><span class="content">org.scala-lang.modules:scala-xml_2.11:1.0.6</span><span class="delimiter">'</span></span> <i class="conum" data-value="5"></i><b>(5)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Public Bintray Artifactory repository</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Scala version that this project will include as dependency</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>JUnit testing library</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Scala testing library</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Scala XML library is required for testing</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The build file adds the <code>scala</code> plugin. This is an extension of the <code>java</code> plugins and adds additional tasks for compiling Scala source code. It also allows for joint compilation of Scala and Java files if found in the appropriate <code>scala</code> source folders.</p>
</div>
<div class="paragraph">
<p>The file <code>src/main/scala/Library.scala</code> is shown here:</p>
</div>
<div class="listingblock">
<div class="title">Generated src/main/scala/Library.scala</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="scala">class Library {
  def someLibraryMethod(): Boolean = true
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated Scala test suite, <code>src/test/scala/LibrarySuite.scala</code> is shown next:</p>
</div>
<div class="listingblock">
<div class="title">Generated  src/test/scala/LibrarySuite.scala</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="scala">import org.scalatest.FunSuite
import org.junit.runner.RunWith
import org.scalatest.junit.JUnitRunner

@RunWith(classOf[JUnitRunner])
class LibrarySuite extends FunSuite {
  test(&quot;someLibraryMethod is always true&quot;) {
    def library = new Library()
    assert(library.someLibraryMethod)
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated test class consists of a single <a href="http://www.scalatest.org/getting_started_with_fun_suite">Scala FunSuite</a>. The test instantiates the <code>Library</code> class, invokes the <code>someLibraryMethod</code> method, and checks that the returned value is `true.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="execute_the_build"><a class="anchor" href="#execute_the_build"></a>Execute the build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build the project, run the <code>build</code> task. You can use the regular <code>gradle</code> command, but when a project includes a wrapper script, it is considered good form to use it instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./gradlew build
:compileJava NO-SOURCE
:compileScala
:processResources NO-SOURCE
:classes
:jar
:assemble
:compileTestJava NO-SOURCE
:compileTestScala
:processTestResources NO-SOURCE
:testClasses
:test
:check
:build

BUILD SUCCESSFUL</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The first time you run the wrapper script, <code>gradlew</code>, there may be a delay while that version of <code>gradle</code> is downloaded and stored locally in your <code>~/.gradle/wrapper/dists</code> folder.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The first time you run the build, Gradle will check whether or not you already have the Scala, ScalaTest and JUnit libraries in your cache under your <code>~/.gradle</code> directory. If not, the libraries will be downloaded and stored there. The next time you run the build, the cached versions will be used. The <code>build</code> task compiles the classes, runs the tests, and generates a test report.</p>
</div>
<div class="paragraph">
<p>You can view the test report by opening the HTML output file, located at <code>build/reports/tests/test/index.html</code>.</p>
</div>
<div class="paragraph">
<p>A sample report is shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Test-Summary.png" alt="Test Summary">
</div>
</div>
<div class="paragraph">
<p>Congratulations, you have just completed the step from creating a Scala library! You can can now customise this to your own project needs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding_api_documentation"><a class="anchor" href="#adding_api_documentation"></a>Adding API documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>scala</code> plugin has built-in support for Scala&#8217;s API documentation tool <code>scaladoc</code>.</p>
</div>
<div class="paragraph">
<p>The code generated by the Build Init plugin already placed a comment on the <code>Library.scala</code> file. Modify the comment to become Scaladoc markup.</p>
</div>
<div class="listingblock">
<div class="title">src/main/scala/Library.scala</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="scala">/** This Scala source file was generated by the Gradle 'init' task.
 */
class Library {
  def someLibraryMethod(): Boolean = true
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the <code>scaladoc</code> task.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./gradlew scaladoc
:compileJava NO-SOURCE
:compileScala
:processResources NO-SOURCE
:classes
:scaladoc

BUILD SUCCESSFUL</pre>
</div>
</div>
<div class="paragraph">
<p>You can view the generated Scaladoc by opening the HTML file, located at <code>build/docs/scaladoc/index.html</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You now have a new Scala project that you generated using Gradle&#8217;s build init plugin. In the process, you saw:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How to generate a Scala library</p>
</li>
<li>
<p>How the generated build file and sample Scala files are structured</p>
</li>
<li>
<p>How to run the build and view the test report</p>
</li>
<li>
<p>Generating API documentation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next_steps"><a class="anchor" href="#next_steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Read about the <a href="https://docs.gradle.org/3.5/userguide/scala_plugin.html">Scala Plugin</a></p>
</li>
<li>
<p>Get to know the configurations for the <a href="https://docs.gradle.org/3.5/dsl/org.gradle.api.tasks.scala.ScalaCompile.html">ScalaCompile</a> and <a href="https://docs.gradle.org/3.5/dsl/org.gradle.api.tasks.scala.ScalaDoc.html">Scaladoc</a> task types.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-05-30 15:34:45 UTC
</div>
</div>
</body>
</html>